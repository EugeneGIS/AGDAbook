<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 2) Import and process geodata | Towards Geo-Data Science</title>
  <meta name="description" content="Chapter 9 2) Import and process geodata | Towards Geo-Data Science" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 2) Import and process geodata | Towards Geo-Data Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 2) Import and process geodata | Towards Geo-Data Science" />
  
  
  

<meta name="author" content="Dr. Marj Tonini" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-2.html"/>
<link rel="next" href="run-random-forest.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/AGDA_ImageCover.webp"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author-information"><i class="fa fa-check"></i>Author Information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> 1) Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-language"><i class="fa fa-check"></i><b>1.1</b> 1.1) R Language</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-packages"><i class="fa fa-check"></i><b>1.1.1</b> 1.1.1) R Packages</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#some-tips"><i class="fa fa-check"></i><b>1.1.2</b> 1.1.2) Some tips</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-commands-online-resources"><i class="fa fa-check"></i><b>1.1.3</b> 1.1.3) R Commands (online resources)</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-markdown"><i class="fa fa-check"></i><b>1.2</b> 1.2) R Markdown</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-type-in-computational-analysis"><i class="fa fa-check"></i><b>1.3</b> 1.3) Data type in computational analysis</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>1.3.1</b> 1.3.1) Variables</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-structure-in-r"><i class="fa fa-check"></i><b>1.3.2</b> 1.3.2) Data structure in R</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frame"><i class="fa fa-check"></i><b>1.3.3</b> 1.3.3) Data Frame</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> 1) Introduction</a></li>
<li class="chapter" data-level="3" data-path="plotting-vector-dataset.html"><a href="plotting-vector-dataset.html"><i class="fa fa-check"></i><b>3</b> 2) Plotting vector dataset</a>
<ul>
<li class="chapter" data-level="3.1" data-path="plotting-vector-dataset.html"><a href="plotting-vector-dataset.html#load-libraries-and-vector-dataset"><i class="fa fa-check"></i><b>3.1</b> 2.1) Load libraries and vector dataset</a></li>
<li class="chapter" data-level="3.2" data-path="plotting-vector-dataset.html"><a href="plotting-vector-dataset.html#plot-vector-features"><i class="fa fa-check"></i><b>3.2</b> 2.2) Plot vector features</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting-raster-dataset.html"><a href="plotting-raster-dataset.html"><i class="fa fa-check"></i><b>4</b> 3) Plotting raster dataset</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-raster-dataset.html"><a href="plotting-raster-dataset.html#load-libraries-and-raster-dataset"><i class="fa fa-check"></i><b>4.1</b> 3.2) Load libraries and raster dataset</a></li>
<li class="chapter" data-level="4.2" data-path="plotting-raster-dataset.html"><a href="plotting-raster-dataset.html#plot-raster-features"><i class="fa fa-check"></i><b>4.2</b> 3.2) Plot raster features</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html"><i class="fa fa-check"></i><b>5</b> 4) Geodata manipulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#manipulate-tabular-datasets"><i class="fa fa-check"></i><b>5.1</b> 4.1) Manipulate tabular datasets</a></li>
<li class="chapter" data-level="5.2" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#pipes-chaining-of-multiple-operations"><i class="fa fa-check"></i><b>5.2</b> 4.2) Pipes: chaining of multiple operations</a></li>
<li class="chapter" data-level="5.3" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#join-table"><i class="fa fa-check"></i><b>5.3</b> 4.3) Join table</a></li>
<li class="chapter" data-level="5.4" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#mapping-with-ggplot2"><i class="fa fa-check"></i><b>5.4</b> 4.4) Mapping with ggplot2</a></li>
<li class="chapter" data-level="5.5" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#cropping-ratser"><i class="fa fa-check"></i><b>5.5</b> 4.5) Cropping ratser</a></li>
<li class="chapter" data-level="5.6" data-path="geodata-manipulation.html"><a href="geodata-manipulation.html#display-categorigal-variables-for-a-raster"><i class="fa fa-check"></i><b>5.6</b> 4.6) Display categorigal variables for a raster</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html"><i class="fa fa-check"></i><b>6</b> 2) Geographically Weighted Summary Statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#gwss-for-fire-management"><i class="fa fa-check"></i><b>6.1</b> 2.1) GWSS for fire management</a></li>
<li class="chapter" data-level="6.2" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#the-overall-methodology"><i class="fa fa-check"></i><b>6.2</b> 2.1.1) The overall methodology</a></li>
<li class="chapter" data-level="6.3" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#forest-fires-dataset"><i class="fa fa-check"></i><b>6.3</b> 2.1.2) Forest fires dataset</a></li>
<li class="chapter" data-level="6.4" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#computer-lab-gwss"><i class="fa fa-check"></i><b>6.4</b> 2.2) Computer lab: GWSS</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#load-the-libraries"><i class="fa fa-check"></i><b>6.4.1</b> 2.2.1) Load the libraries</a></li>
<li class="chapter" data-level="6.4.2" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#import-the-forest-fire-dataset"><i class="fa fa-check"></i><b>6.4.2</b> 2.2.2) Import the forest fire dataset</a></li>
<li class="chapter" data-level="6.4.3" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#forest-fires-spatial-distribution"><i class="fa fa-check"></i><b>6.4.3</b> 2.2.3) Forest fires spatial distribution</a></li>
<li class="chapter" data-level="6.4.4" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#compute-the-geographically-whited-statistics"><i class="fa fa-check"></i><b>6.4.4</b> 2.2.4) Compute the geographically whited statistics</a></li>
<li class="chapter" data-level="6.4.5" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#look-at-the-results"><i class="fa fa-check"></i><b>6.4.5</b> 2.2.5) Look at the results</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="geographically-weighted-summary-statistics.html"><a href="geographically-weighted-summary-statistics.html#conclusions-and-further-analyses"><i class="fa fa-check"></i><b>6.5</b> 3) Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html"><i class="fa fa-check"></i><b>7</b> Kernel Density Estimator</a>
<ul>
<li class="chapter" data-level="7.1" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#method"><i class="fa fa-check"></i><b>7.2</b> Method</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#ripleys-k-function"><i class="fa fa-check"></i><b>7.2.1</b> Ripley’s K-function</a></li>
<li class="chapter" data-level="7.2.2" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#kernel-density-estimator-1"><i class="fa fa-check"></i><b>7.2.2</b> Kernel density estimator</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#load-the-libraries-1"><i class="fa fa-check"></i><b>7.3</b> Load the libraries</a></li>
<li class="chapter" data-level="7.4" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#import-the-portuguese-forest-fire-dataset"><i class="fa fa-check"></i><b>7.4</b> Import the Portuguese forest fire dataset</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#ff-subsets-based-on-the-burned-areas-size"><i class="fa fa-check"></i><b>7.4.1</b> FF-subsets based on the burned areas’ size</a></li>
<li class="chapter" data-level="7.4.2" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#ff-subsets-based-on-their-geographical-distribution"><i class="fa fa-check"></i><b>7.4.2</b> FF-subsets based on their geographical distribution</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#the-space-time-k-function"><i class="fa fa-check"></i><b>7.5</b> The space-time K-function</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#extract-time-and-pts-object"><i class="fa fa-check"></i><b>7.5.1</b> Extract Time and PTS object</a></li>
<li class="chapter" data-level="7.5.2" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#compute-the-space-time-k-function"><i class="fa fa-check"></i><b>7.5.2</b> Compute the space-time K-function</a></li>
<li class="chapter" data-level="7.5.3" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#assess-the-space-time-clustering-behavior"><i class="fa fa-check"></i><b>7.5.3</b> Assess the space-time clustering behavior</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#conclusions-and-further-analyses-1"><i class="fa fa-check"></i><b>7.6</b> Conclusions and further analyses</a></li>
<li class="chapter" data-level="7.7" data-path="kernel-density-estimator.html"><a href="kernel-density-estimator.html#r-markdown-1"><i class="fa fa-check"></i><b>7.7</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>8</b> 1) Introduction</a>
<ul>
<li class="chapter" data-level="8.1" data-path="introduction-2.html"><a href="introduction-2.html#the-main-objective"><i class="fa fa-check"></i><b>8.1</b> 1.1) The main objective</a></li>
<li class="chapter" data-level="8.2" data-path="introduction-2.html"><a href="introduction-2.html#the-overall-methodology-1"><i class="fa fa-check"></i><b>8.2</b> 1.2) The overall methodology</a></li>
<li class="chapter" data-level="8.3" data-path="introduction-2.html"><a href="introduction-2.html#load-libraries"><i class="fa fa-check"></i><b>8.3</b> 1.3) Load libraries</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html"><i class="fa fa-check"></i><b>9</b> 2) Import and process geodata</a>
<ul>
<li class="chapter" data-level="9.1" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html#landslides-dataset"><i class="fa fa-check"></i><b>9.1</b> 2.1) Landslides dataset</a></li>
<li class="chapter" data-level="9.2" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html#predictor-variables"><i class="fa fa-check"></i><b>9.2</b> 2.2) Predictor variables</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html#the-use-of-categorical-variables-in-machine-learning"><i class="fa fa-check"></i><b>9.2.1</b> 2.2.1) The use of categorical variables in Machine Learning</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html#extract-velues"><i class="fa fa-check"></i><b>9.3</b> 2.3) Extract velues</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="import-and-process-geodata.html"><a href="import-and-process-geodata.html#split-the-input-dataset-into-training-80-and-testing-20"><i class="fa fa-check"></i><b>9.3.1</b> 2.3.1) Split the input dataset into training (80%) and testing (20%)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="run-random-forest.html"><a href="run-random-forest.html"><i class="fa fa-check"></i><b>10</b> 4) Run Random Forest</a>
<ul>
<li class="chapter" data-level="10.1" data-path="run-random-forest.html"><a href="run-random-forest.html#rf-main-outputs"><i class="fa fa-check"></i><b>10.1</b> 4.1) RF main outputs</a></li>
<li class="chapter" data-level="10.2" data-path="run-random-forest.html"><a href="run-random-forest.html#model-evaluation"><i class="fa fa-check"></i><b>10.2</b> 4.2) Model evaluation</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="susceptibility-map.html"><a href="susceptibility-map.html"><i class="fa fa-check"></i><b>11</b> 5) Susceptibility map</a>
<ul>
<li class="chapter" data-level="11.1" data-path="susceptibility-map.html"><a href="susceptibility-map.html#class-intervals-for-decision-maker"><i class="fa fa-check"></i><b>11.1</b> 5.1) Class intervals for decision maker</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="conclusions-and-further-analyses-2.html"><a href="conclusions-and-further-analyses-2.html"><i class="fa fa-check"></i><b>12</b> 6) Conclusions and further analyses</a></li>
<li class="chapter" data-level="13" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>13</b> References</a></li>
<li class="chapter" data-level="14" data-path="interpretability-and-explainability-machine-learinig.html"><a href="interpretability-and-explainability-machine-learinig.html"><i class="fa fa-check"></i><b>14</b> 1) Interpretability and Explainability Machine Learinig</a>
<ul>
<li class="chapter" data-level="14.1" data-path="interpretability-and-explainability-machine-learinig.html"><a href="interpretability-and-explainability-machine-learinig.html#some-definitinions"><i class="fa fa-check"></i><b>14.1</b> 1.1) Some definitinions</a></li>
<li class="chapter" data-level="14.2" data-path="interpretability-and-explainability-machine-learinig.html"><a href="interpretability-and-explainability-machine-learinig.html#aim-of-the-present-lab"><i class="fa fa-check"></i><b>14.2</b> 1.2) Aim of the present lab</a></li>
<li class="chapter" data-level="14.3" data-path="interpretability-and-explainability-machine-learinig.html"><a href="interpretability-and-explainability-machine-learinig.html#re-load-lybraries-and-workspace"><i class="fa fa-check"></i><b>14.3</b> 1.3) Re-load lybraries and workspace</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="variable-importance-plot.html"><a href="variable-importance-plot.html"><i class="fa fa-check"></i><b>15</b> 2) Variable importance plot</a>
<ul>
<li class="chapter" data-level="15.1" data-path="variable-importance-plot.html"><a href="variable-importance-plot.html#partial-dependence-plot"><i class="fa fa-check"></i><b>15.1</b> 2.1) Partial dependence plot</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="local-random-forest.html"><a href="local-random-forest.html"><i class="fa fa-check"></i><b>16</b> 2) Local Random Forest</a>
<ul>
<li class="chapter" data-level="16.1" data-path="local-random-forest.html"><a href="local-random-forest.html#run-grf"><i class="fa fa-check"></i><b>16.1</b> 2.1) Run GRF</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="local-random-forest.html"><a href="local-random-forest.html#global-variable-importance-plot"><i class="fa fa-check"></i><b>16.1.1</b> 2.1.1) Global variable importance plot</a></li>
<li class="chapter" data-level="16.1.2" data-path="local-random-forest.html"><a href="local-random-forest.html#local-variable-importance"><i class="fa fa-check"></i><b>16.1.2</b> 2.1.2) Local Variable importance</a></li>
<li class="chapter" data-level="16.1.3" data-path="local-random-forest.html"><a href="local-random-forest.html#slope"><i class="fa fa-check"></i><b>16.1.3</b> - Slope</a></li>
<li class="chapter" data-level="16.1.4" data-path="local-random-forest.html"><a href="local-random-forest.html#distance-to-roads"><i class="fa fa-check"></i><b>16.1.4</b> - Distance to roads</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="local-random-forest.html"><a href="local-random-forest.html#local-r-squared"><i class="fa fa-check"></i><b>16.2</b> 2.1.3) Local R squared</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="conclusions-and-further-analyses-3.html"><a href="conclusions-and-further-analyses-3.html"><i class="fa fa-check"></i><b>17</b> 6) Conclusions and further analyses</a></li>
<li class="chapter" data-level="18" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i><b>18</b> References</a></li>
<li class="chapter" data-level="19" data-path="self-organizing-map.html"><a href="self-organizing-map.html"><i class="fa fa-check"></i><b>19</b> Self-organizing Map</a>
<ul>
<li class="chapter" data-level="19.1" data-path="self-organizing-map.html"><a href="self-organizing-map.html#introduction-3"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
<li class="chapter" data-level="19.2" data-path="self-organizing-map.html"><a href="self-organizing-map.html#material-and-method"><i class="fa fa-check"></i><b>19.2</b> Material and method</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="self-organizing-map.html"><a href="self-organizing-map.html#the-geo-demographic-context"><i class="fa fa-check"></i><b>19.2.1</b> The geo-demographic context</a></li>
<li class="chapter" data-level="19.2.2" data-path="self-organizing-map.html"><a href="self-organizing-map.html#som"><i class="fa fa-check"></i><b>19.2.2</b> SOM</a></li>
<li class="chapter" data-level="19.2.3" data-path="self-organizing-map.html"><a href="self-organizing-map.html#swiss-census-data"><i class="fa fa-check"></i><b>19.2.3</b> Swiss census data</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="self-organizing-map.html"><a href="self-organizing-map.html#variables-inspection"><i class="fa fa-check"></i><b>19.3</b> Variables inspection</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="self-organizing-map.html"><a href="self-organizing-map.html#import-the-data"><i class="fa fa-check"></i><b>19.3.1</b> Import the data</a></li>
<li class="chapter" data-level="19.3.2" data-path="self-organizing-map.html"><a href="self-organizing-map.html#inspect-the-data"><i class="fa fa-check"></i><b>19.3.2</b> Inspect the data</a></li>
<li class="chapter" data-level="19.3.3" data-path="self-organizing-map.html"><a href="self-organizing-map.html#data-transformation"><i class="fa fa-check"></i><b>19.3.3</b> Data transformation</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="self-organizing-map.html"><a href="self-organizing-map.html#running-som"><i class="fa fa-check"></i><b>19.4</b> Running SOM</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="self-organizing-map.html"><a href="self-organizing-map.html#load-the-libraries-2"><i class="fa fa-check"></i><b>19.4.1</b> Load the libraries</a></li>
<li class="chapter" data-level="19.4.2" data-path="self-organizing-map.html"><a href="self-organizing-map.html#compute-som"><i class="fa fa-check"></i><b>19.4.2</b> Compute SOM</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="self-organizing-map.html"><a href="self-organizing-map.html#soms-main-outputs"><i class="fa fa-check"></i><b>19.5</b> SOM’s main outputs</a></li>
<li class="chapter" data-level="19.6" data-path="self-organizing-map.html"><a href="self-organizing-map.html#hierarchical-clustering"><i class="fa fa-check"></i><b>19.6</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="self-organizing-map.html"><a href="self-organizing-map.html#clusters-characterization"><i class="fa fa-check"></i><b>19.6.1</b> Clusters characterization</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="self-organizing-map.html"><a href="self-organizing-map.html#conclusions"><i class="fa fa-check"></i><b>19.7</b> Conclusions</a></li>
<li class="chapter" data-level="19.8" data-path="self-organizing-map.html"><a href="self-organizing-map.html#further-analyses"><i class="fa fa-check"></i><b>19.8</b> Further analyses</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html"><i class="fa fa-check"></i><b>20</b> Density-based Clustering Algorithm</a>
<ul>
<li class="chapter" data-level="20.1" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#introduction-4"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
<li class="chapter" data-level="20.2" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#the-overall-methodology-2"><i class="fa fa-check"></i><b>20.2</b> The overall methodology</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#dbscan-3-d-density-based-clustering-algorithm"><i class="fa fa-check"></i><b>20.2.1</b> DBSCAN: 3-D density based clustering algorithm</a></li>
<li class="chapter" data-level="20.2.2" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#field-campaign"><i class="fa fa-check"></i><b>20.2.2</b> Field campaign</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#dbscan-feature-detection-from-points-clouds"><i class="fa fa-check"></i><b>20.3</b> DBSCAN: feature detection from points clouds</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#load-the-libraries-3"><i class="fa fa-check"></i><b>20.3.1</b> Load the libraries</a></li>
<li class="chapter" data-level="20.3.2" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#import-and-visualise-the-point-clouds-dataset"><i class="fa fa-check"></i><b>20.3.2</b> Import and visualise the point clouds dataset</a></li>
<li class="chapter" data-level="20.3.3" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#run-dbscan"><i class="fa fa-check"></i><b>20.3.3</b> Run DBSCAN</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="density-based-clustering-algorithm.html"><a href="density-based-clustering-algorithm.html#conclusions-and-further-analyses-4"><i class="fa fa-check"></i><b>20.4</b> Conclusions and further analyses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-2.html"><a href="references-2.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Towards Geo-Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="import-and-process-geodata" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapter 9</span> 2) Import and process geodata<a href="import-and-process-geodata.html#import-and-process-geodata" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Import <em>landslides punctual dataset</em> presences and absences (LS_pa) and <em>predictors</em> (in raster format).
This help the exploratory data analyses step and to understand the input data structure.</p>
<div id="landslides-dataset" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> 2.1) Landslides dataset<a href="import-and-process-geodata.html#landslides-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>landslide inventory</strong> has been provided by the environmental office of the canton of Vaud.
Only <em>shallow landslides</em> are used for susceptibility modelling.
One pixel per landslide-area (namely the one located at the highest elevation) has been extracted.
Since the landslide scarp is located in the upper part of the polygon, it makes sense to consider the highest pixel to characterize each single event.</p>
<p>Our model includes the implementation of the landslide <strong>pseudo-absences</strong>, which are the areas where the hazardous events did not took place (i.e. landslide location is known and the mapped footprint areas are available, but the non-landslide areas have to be defined).
Indeed, to assure a good generalization of the model and to avoid the overestimation of the absence, pseudo-absences need to be generated in all the cases where they are not explicitly expressed.
In this case study, an equal number of point as for presences has been randomly generated in the study area, except within landslides polygons, lakes and glaciers (that is what is called “validity domain”, where events could potentially occur).</p>
<p><strong>The landslides dataset</strong></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="import-and-process-geodata.html#cb145-1" tabindex="-1"></a><span class="co"># Import the boundary of Canton Vaud </span></span>
<span id="cb145-2"><a href="import-and-process-geodata.html#cb145-2" tabindex="-1"></a>Vaud <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="st">&quot;data/RF/Vaud_CH.shp&quot;</span>)</span>
<span id="cb145-3"><a href="import-and-process-geodata.html#cb145-3" tabindex="-1"></a>Lake <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="st">&quot;data/RF/Lakes_VD.shp&quot;</span>)</span>
<span id="cb145-4"><a href="import-and-process-geodata.html#cb145-4" tabindex="-1"></a></span>
<span id="cb145-5"><a href="import-and-process-geodata.html#cb145-5" tabindex="-1"></a></span>
<span id="cb145-6"><a href="import-and-process-geodata.html#cb145-6" tabindex="-1"></a><span class="co"># Import the landslides dataset (dependent variable)</span></span>
<span id="cb145-7"><a href="import-and-process-geodata.html#cb145-7" tabindex="-1"></a>LS_pa <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/RF/LS_pa.csv&quot;</span>) </span>
<span id="cb145-8"><a href="import-and-process-geodata.html#cb145-8" tabindex="-1"></a></span>
<span id="cb145-9"><a href="import-and-process-geodata.html#cb145-9" tabindex="-1"></a><span class="co"># Convert the numeric values (0/1) as factor </span></span>
<span id="cb145-10"><a href="import-and-process-geodata.html#cb145-10" tabindex="-1"></a><span class="do">##(i.e. categorical value)</span></span>
<span id="cb145-11"><a href="import-and-process-geodata.html#cb145-11" tabindex="-1"></a>LS_pa<span class="sc">$</span>LS<span class="ot">&lt;-</span><span class="fu">as.factor</span>(LS_pa<span class="sc">$</span>LS)</span>
<span id="cb145-12"><a href="import-and-process-geodata.html#cb145-12" tabindex="-1"></a></span>
<span id="cb145-13"><a href="import-and-process-geodata.html#cb145-13" tabindex="-1"></a>LS_vect<span class="ot">&lt;-</span><span class="fu">vect</span>(LS_pa, <span class="at">geom=</span><span class="fu">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>),<span class="at">crs=</span><span class="fu">crs</span>(Vaud))</span>
<span id="cb145-14"><a href="import-and-process-geodata.html#cb145-14" tabindex="-1"></a></span>
<span id="cb145-15"><a href="import-and-process-geodata.html#cb145-15" tabindex="-1"></a><span class="co"># Display the structure (str) and result summaries (summary)</span></span>
<span id="cb145-16"><a href="import-and-process-geodata.html#cb145-16" tabindex="-1"></a><span class="fu">str</span>(LS_vect)</span>
<span id="cb145-17"><a href="import-and-process-geodata.html#cb145-17" tabindex="-1"></a><span class="fu">summary</span>(LS_vect)</span>
<span id="cb145-18"><a href="import-and-process-geodata.html#cb145-18" tabindex="-1"></a></span>
<span id="cb145-19"><a href="import-and-process-geodata.html#cb145-19" tabindex="-1"></a><span class="co"># Plot the events</span></span>
<span id="cb145-20"><a href="import-and-process-geodata.html#cb145-20" tabindex="-1"></a><span class="fu">plot</span>(Vaud)</span>
<span id="cb145-21"><a href="import-and-process-geodata.html#cb145-21" tabindex="-1"></a><span class="fu">plot</span>(Lake, <span class="at">col=</span><span class="st">&quot;lightblue&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb145-22"><a href="import-and-process-geodata.html#cb145-22" tabindex="-1"></a><span class="fu">plot</span>(LS_vect, <span class="at">col=</span>LS_pa<span class="sc">$</span>LS, <span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="fl">0.5</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/import-data-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="predictor-variables" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> 2.2) Predictor variables<a href="import-and-process-geodata.html#predictor-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Selecting predictive variables is a key stage of landslide susceptibility modelling when using a data-driven approach.
There is no consensus about the number of variables and which variables should be used.
In the present exercice e will use the following:</p>
<ul>
<li><p><strong>DEM (digital elevation model)</strong>: provided by the Swiss Federal Offce of Topography.
The elevation is not a direct conditioning factor for landslide; however, it can reflect differences in vegetation characteristics and soil</p></li>
<li><p><strong>Slope</strong>: is one of the most explicating factor in landslide susceptibility modelling.</p></li>
</ul>
<p><span class="math display">\[Slope = arctan(\sqrt{(dz/dx)^2 + (dz/dy)^2)} * (\pi/2)\]</span></p>
<ul>
<li><p><strong>Curvature</strong>: curvature is widely used in landslide susceptibility modelling.
It allows assessing the water flow acceleration and sediment transport process (<em>profile curvature</em>) and the water flow propensity to converge and diverge (<em>plan curvature</em>).
They were derived from DEM using the curvature tool in ArcGIS.</p></li>
<li><p><strong>TWI (topographical water index)</strong>: topography plays a key role in the spatial distribution of soil hydrological conditions.
Defining <span class="math inline">\(\alpha\)</span> as the upslope contributing area describing the propensity of a cell to receive water, and <span class="math inline">\(\beta\)</span> as the slope angle, TWI (compute by the formula below), reflects the propensity of a cell to evacuate water:</p></li>
</ul>
<p><span class="math display">\[TWI=ln(\alpha/tan(\beta))\]</span></p>
<ul>
<li><p><strong>Distance to roads</strong>: roads build in mountainous areas often cut the slope, weakening the cohesion of the soil.
Moreover, roads surfaces are highly impermeable.
This raster has been elaborated using the euclidean distance tool in ArcGIS, from the swissTLMRegio map where roads are represented by lines.</p></li>
<li><p><strong>Land Cover</strong>: developed by the Swiss administration and based on aerial photographs and control points.
It includes 27 categories distributed in the following 6 domains: human modified surfaces, herbaceous vegetation, shrubs vegetation, tree vegetation, surfaces without vegetation, water surfaces (glaciers included).</p></li>
<li><p><strong>Geology</strong>: The use of the lithology increase the performance of the susceptibility landslide models.
We use here the map elaborated by the Canton Vaud, defining the geotypes and reclassified in 10 classes in order to differentiate sedimentary rocks.</p></li>
</ul>
<p>Than the predictor variables have to be aggregated into single object, storing multiple raster.
We use here the generic function <strong>c</strong> to combine the single raster into multiple raster objet.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="import-and-process-geodata.html#cb146-1" tabindex="-1"></a><span class="do">## Import raster (independent variables) 25 meter resolution</span></span>
<span id="cb146-2"><a href="import-and-process-geodata.html#cb146-2" tabindex="-1"></a></span>
<span id="cb146-3"><a href="import-and-process-geodata.html#cb146-3" tabindex="-1"></a>landCover<span class="ot">&lt;-</span><span class="fu">as.factor</span>(<span class="fu">rast</span>(<span class="st">&quot;data/RF/landCover.tif&quot;</span>))</span>
<span id="cb146-4"><a href="import-and-process-geodata.html#cb146-4" tabindex="-1"></a>geology<span class="ot">&lt;-</span><span class="fu">as.factor</span>(<span class="fu">rast</span>(<span class="st">&quot;data/RF/Geological_classes.tif&quot;</span>))</span>
<span id="cb146-5"><a href="import-and-process-geodata.html#cb146-5" tabindex="-1"></a></span>
<span id="cb146-6"><a href="import-and-process-geodata.html#cb146-6" tabindex="-1"></a>planCurv<span class="ot">&lt;-</span><span class="fu">rast</span>(<span class="st">&quot;data/RF/plan_curvature.tif&quot;</span>)<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb146-7"><a href="import-and-process-geodata.html#cb146-7" tabindex="-1"></a>profCurv<span class="ot">&lt;-</span><span class="fu">rast</span>(<span class="st">&quot;data/RF/profil_curvature.tif&quot;</span>)<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb146-8"><a href="import-and-process-geodata.html#cb146-8" tabindex="-1"></a></span>
<span id="cb146-9"><a href="import-and-process-geodata.html#cb146-9" tabindex="-1"></a><span class="co"># this because ArcGIS multiply curvature values by 100</span></span>
<span id="cb146-10"><a href="import-and-process-geodata.html#cb146-10" tabindex="-1"></a></span>
<span id="cb146-11"><a href="import-and-process-geodata.html#cb146-11" tabindex="-1"></a>TWI <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/TWI.tif&quot;</span>)</span>
<span id="cb146-12"><a href="import-and-process-geodata.html#cb146-12" tabindex="-1"></a>Slope <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/Slope.tif&quot;</span>)</span>
<span id="cb146-13"><a href="import-and-process-geodata.html#cb146-13" tabindex="-1"></a>dem <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/DEM.tif&quot;</span>)</span>
<span id="cb146-14"><a href="import-and-process-geodata.html#cb146-14" tabindex="-1"></a>dist <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/RF/dist_roads.tif&quot;</span>)</span>
<span id="cb146-15"><a href="import-and-process-geodata.html#cb146-15" tabindex="-1"></a></span>
<span id="cb146-16"><a href="import-and-process-geodata.html#cb146-16" tabindex="-1"></a><span class="co"># Combine raster</span></span>
<span id="cb146-17"><a href="import-and-process-geodata.html#cb146-17" tabindex="-1"></a></span>
<span id="cb146-18"><a href="import-and-process-geodata.html#cb146-18" tabindex="-1"></a>features<span class="ot">&lt;-</span><span class="fu">c</span>(dist, dem, landCover, TWI, planCurv, profCurv, Slope, geology)</span>
<span id="cb146-19"><a href="import-and-process-geodata.html#cb146-19" tabindex="-1"></a></span>
<span id="cb146-20"><a href="import-and-process-geodata.html#cb146-20" tabindex="-1"></a><span class="co"># renames features as in LS</span></span>
<span id="cb146-21"><a href="import-and-process-geodata.html#cb146-21" tabindex="-1"></a><span class="fu">names</span>(features)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;distRoad&quot;</span>, <span class="st">&quot;DEM&quot;</span>, <span class="st">&quot;landCover&quot;</span>, <span class="st">&quot;TWI&quot;</span>, <span class="st">&quot;planCurv&quot;</span>, <span class="st">&quot;profCurv&quot;</span>, <span class="st">&quot;slope&quot;</span>, <span class="st">&quot;geology&quot;</span>)</span>
<span id="cb146-22"><a href="import-and-process-geodata.html#cb146-22" tabindex="-1"></a></span>
<span id="cb146-23"><a href="import-and-process-geodata.html#cb146-23" tabindex="-1"></a><span class="co"># mask to DEM extension</span></span>
<span id="cb146-24"><a href="import-and-process-geodata.html#cb146-24" tabindex="-1"></a>features <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(features, dem)</span>
<span id="cb146-25"><a href="import-and-process-geodata.html#cb146-25" tabindex="-1"></a></span>
<span id="cb146-26"><a href="import-and-process-geodata.html#cb146-26" tabindex="-1"></a><span class="fu">plot</span>(features)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/import-raster-1.png" width="672" style="display: block; margin: auto;" /></p>
<div id="the-use-of-categorical-variables-in-machine-learning" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> 2.2.1) The use of categorical variables in Machine Learning<a href="import-and-process-geodata.html#the-use-of-categorical-variables-in-machine-learning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The majority of ML algorithms (e.g., support vector machines, artificial neural network, deep learning) makes predictions on the base of the proximity between the values of the predictors, computed in terms of euclidean distance.
This means that these algorithms can not handle directly categorical values (i.e., qualitative descriptors).
Thus, in most of the cases, categorical variables need to be transformed into a numerical format.
One of the advantage of using Random Forest (as implemented in R) is that it can handle directly categorical variables, since the algorithm operate by constructing a multitude of decision trees at training time and the best split is chosen just by counting the proportion of each class observation.</p>
<p>To understand the characteristics of the categorical variables, you can plot the tow raster <strong>Land Cover</strong> and <strong>Geology</strong> by using their original classes and look at the attribute table to analyse the corresponding definitions.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="import-and-process-geodata.html#cb147-1" tabindex="-1"></a><span class="fu">plot</span>(geology)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/geology-map-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="import-and-process-geodata.html#cb148-1" tabindex="-1"></a><span class="fu">plot</span>(landCover)</span></code></pre></div>
<p><img src="05-RF_Cl_files/figure-html/geology-map-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="figure" style="text-align: center">
<img src="data/RF/Cat_classes.PNG" alt="Categorical variables \label{Cat_class}" width="80%" height="80%" />
<p class="caption">
(#fig:cat_class)Categorical variables
</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="extract-velues" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> 2.3) Extract velues<a href="import-and-process-geodata.html#extract-velues" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this step, you will extract the values of the predictors at each location in the landslides (presences and absences) dataset.
The final output represents the input dataset with dependent (LS = landslides) and independent (raster features) variables.</p>
<p><strong>The final input dataset</strong></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="import-and-process-geodata.html#cb149-1" tabindex="-1"></a><span class="co"># Extract values from the raster dataset (features)</span></span>
<span id="cb149-2"><a href="import-and-process-geodata.html#cb149-2" tabindex="-1"></a>LS_input <span class="ot">&lt;-</span><span class="fu">extract</span>(features, LS_vect, <span class="at">method=</span><span class="st">&quot;simple&quot;</span>,  <span class="at">xy=</span><span class="cn">TRUE</span>)</span>
<span id="cb149-3"><a href="import-and-process-geodata.html#cb149-3" tabindex="-1"></a></span>
<span id="cb149-4"><a href="import-and-process-geodata.html#cb149-4" tabindex="-1"></a>LS_input<span class="sc">$</span>LS <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(LS_vect<span class="sc">$</span>LS) <span class="co"># add LS</span></span>
<span id="cb149-5"><a href="import-and-process-geodata.html#cb149-5" tabindex="-1"></a><span class="fu">str</span>(LS_input) <span class="co"># explore the dataset</span></span>
<span id="cb149-6"><a href="import-and-process-geodata.html#cb149-6" tabindex="-1"></a></span>
<span id="cb149-7"><a href="import-and-process-geodata.html#cb149-7" tabindex="-1"></a><span class="co"># remove extra column (ID)</span></span>
<span id="cb149-8"><a href="import-and-process-geodata.html#cb149-8" tabindex="-1"></a>LS_input <span class="ot">&lt;-</span> LS_input[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(LS_input)]</span>
<span id="cb149-9"><a href="import-and-process-geodata.html#cb149-9" tabindex="-1"></a>LS_input<span class="ot">&lt;-</span><span class="fu">na.omit</span>(LS_input)</span>
<span id="cb149-10"><a href="import-and-process-geodata.html#cb149-10" tabindex="-1"></a></span>
<span id="cb149-11"><a href="import-and-process-geodata.html#cb149-11" tabindex="-1"></a><span class="co"># Explore the newly created input dataset</span></span>
<span id="cb149-12"><a href="import-and-process-geodata.html#cb149-12" tabindex="-1"></a><span class="fu">head</span>(LS_input)</span>
<span id="cb149-13"><a href="import-and-process-geodata.html#cb149-13" tabindex="-1"></a><span class="fu">str</span>(LS_input)</span></code></pre></div>
<div id="split-the-input-dataset-into-training-80-and-testing-20" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> 2.3.1) Split the input dataset into training (80%) and testing (20%)<a href="import-and-process-geodata.html#split-the-input-dataset-into-training-80-and-testing-20" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A well-established procedure in ML is to split the input dataset into training, validation, and testing.</p>
<ul>
<li><p>The <strong>training dataset</strong> is needed to calibrate the parameters of the model, which will be used to get predictions on new data.</p></li>
<li><p>The purpose of the <strong>validation dataset</strong> is to optimize the hyperparameter of the model (<em>training phase</em>).
<strong>NB</strong>: in Random Forest this subset is represented by the Out-Of-Bag (<strong>OOB</strong>)!</p></li>
<li><p>To provide an unbiased evaluation of the final model and to assess its performance, results are then predicted over unused observations (<em>prediction phase</em>), defined as the <strong>testing dataset</strong>.</p></li>
</ul>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="import-and-process-geodata.html#cb150-1" tabindex="-1"></a><span class="co"># Shuffle the rows</span></span>
<span id="cb150-2"><a href="import-and-process-geodata.html#cb150-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># to ensure reproducibility </span></span>
<span id="cb150-3"><a href="import-and-process-geodata.html#cb150-3" tabindex="-1"></a>LS_input_sh<span class="ot">&lt;-</span>LS_input [<span class="fu">sample</span>(<span class="fu">nrow</span>(LS_input), <span class="fu">nrow</span>(LS_input)), ] </span>
<span id="cb150-4"><a href="import-and-process-geodata.html#cb150-4" tabindex="-1"></a></span>
<span id="cb150-5"><a href="import-and-process-geodata.html#cb150-5" tabindex="-1"></a><span class="co"># Split the input dataset into training (80%) and testing (20%)</span></span>
<span id="cb150-6"><a href="import-and-process-geodata.html#cb150-6" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span> (LS_input_sh)</span>
<span id="cb150-7"><a href="import-and-process-geodata.html#cb150-7" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb150-8"><a href="import-and-process-geodata.html#cb150-8" tabindex="-1"></a>n_train <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fl">0.80</span> <span class="sc">*</span> n) </span>
<span id="cb150-9"><a href="import-and-process-geodata.html#cb150-9" tabindex="-1"></a>train_indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>n, n_train)</span>
<span id="cb150-10"><a href="import-and-process-geodata.html#cb150-10" tabindex="-1"></a></span>
<span id="cb150-11"><a href="import-and-process-geodata.html#cb150-11" tabindex="-1"></a><span class="co"># Create indices</span></span>
<span id="cb150-12"><a href="import-and-process-geodata.html#cb150-12" tabindex="-1"></a>LS_train <span class="ot">&lt;-</span> LS_input_sh[train_indices, ]  </span>
<span id="cb150-13"><a href="import-and-process-geodata.html#cb150-13" tabindex="-1"></a>LS_test <span class="ot">&lt;-</span> LS_input_sh[<span class="sc">-</span>train_indices, ]</span>
<span id="cb150-14"><a href="import-and-process-geodata.html#cb150-14" tabindex="-1"></a></span>
<span id="cb150-15"><a href="import-and-process-geodata.html#cb150-15" tabindex="-1"></a><span class="co"># Count the number of elements in the two subset: training and testing</span></span>
<span id="cb150-16"><a href="import-and-process-geodata.html#cb150-16" tabindex="-1"></a><span class="fu">count</span>(LS_train)</span>
<span id="cb150-17"><a href="import-and-process-geodata.html#cb150-17" tabindex="-1"></a><span class="fu">count</span>(LS_test)</span></code></pre></div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="run-random-forest.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/EugeneGIS/AGDAbook/edit/master/05-RF_Cl.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["fake-book.pdf", "fake-book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
